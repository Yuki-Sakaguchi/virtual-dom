(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var view_1 = require("./view");
var App = (function () {
    function App(params) {
        this.el = typeof params.el === "string" ? document.querySelector(params.el) : params.el;
        this.view = params.view;
        this.state = params.state;
        this.actions = this.dispatchAction(params.actions);
        this.resolveNode();
    }
    App.prototype.dispatchAction = function (actions) {
        var _this = this;
        var dispatched = {};
        var _loop_1 = function (key) {
            var action = actions[key];
            dispatched[key] = function (state) {
                var data = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    data[_i - 1] = arguments[_i];
                }
                var ret = action.apply(void 0, [state].concat(data));
                _this.resolveNode();
                return ret;
            };
        };
        for (var key in actions) {
            _loop_1(key);
        }
        return dispatched;
    };
    App.prototype.resolveNode = function () {
        this.newNode = this.view(this.state, this.actions);
        this.scheduleRender();
    };
    App.prototype.scheduleRender = function () {
        if (!this.skipRender) {
            this.skipRender = true;
            setTimeout(this.render.bind(this));
        }
    };
    App.prototype.render = function () {
        if (this.oldNode) {
            view_1.updateElement(this.el, this.oldNode, this.newNode);
        }
        else {
            this.el.appendChild(view_1.createElement(this.newNode));
        }
        this.oldNode = this.newNode;
        this.skipRender = false;
    };
    return App;
}());
exports.App = App;

},{"./view":2}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function h(nodeName, attributes) {
    var children = [];
    for (var _i = 2; _i < arguments.length; _i++) {
        children[_i - 2] = arguments[_i];
    }
    return {
        nodeName: nodeName,
        attributes: attributes,
        children: children
    };
}
exports.h = h;
function createElement(node) {
    if (!isVNode(node)) {
        return document.createTextNode(node.toString());
    }
    var el = document.createElement(node.nodeName);
    setAttributes(el, node.attributes);
    node.children.forEach(function (child) { return el.appendChild(createElement(child)); });
    return el;
}
exports.createElement = createElement;
function isVNode(node) {
    return typeof node !== "string" && typeof node !== "number";
}
function setAttributes(target, attrs) {
    for (var attr in attrs) {
        if (isEventAttr(attr)) {
            var eventName = attr.slice(2);
            target.addEventListener(eventName, attrs[attr]);
        }
        else {
            target.setAttribute(attr, attrs[attr]);
        }
    }
}
function isEventAttr(attr) {
    return /^on/.test(attr);
}
var ChangedType;
(function (ChangedType) {
    ChangedType[ChangedType["None"] = 0] = "None";
    ChangedType[ChangedType["Type"] = 1] = "Type";
    ChangedType[ChangedType["Text"] = 2] = "Text";
    ChangedType[ChangedType["Node"] = 3] = "Node";
    ChangedType[ChangedType["Value"] = 4] = "Value";
    ChangedType[ChangedType["Attr"] = 5] = "Attr";
})(ChangedType || (ChangedType = {}));
function hasChanged(a, b) {
    if (typeof a !== typeof b) {
        return ChangedType.Type;
    }
    if (!isVNode(a) && a !== b) {
        return ChangedType.Text;
    }
    if (isVNode(a) && isVNode(b)) {
        if (a.nodeName !== b.nodeName) {
            return ChangedType.Node;
        }
        if ((a.attributes !== null && b.attributes !== null) && a.attributes.value !== b.attributes.value) {
            return ChangedType.Value;
        }
        if (JSON.stringify(a.attributes) !== JSON.stringify(b.attributes)) {
            return ChangedType.Attr;
        }
    }
    return ChangedType.None;
}
function updateElement(parent, oldNode, newNode, index) {
    if (index === void 0) { index = 0; }
    if (oldNode == null) {
        parent.appendChild(createElement(newNode));
        return;
    }
    var target = parent.childNodes[index];
    if (newNode == null) {
        parent.removeChild(target);
        return;
    }
    var changeType = hasChanged(oldNode, newNode);
    switch (changeType) {
        case ChangedType.Type:
        case ChangedType.Text:
        case ChangedType.Node:
            parent.replaceChild(createElement(newNode), target);
            return;
        case ChangedType.Value:
            updateValue(target, newNode.attributes.value);
            return;
        case ChangedType.Attr:
            updateAttributes(target, oldNode.attributes, newNode.attributes);
            return;
    }
    if (isVNode(oldNode) && isVNode(newNode)) {
        for (var i = 0; i < newNode.children.length || i < oldNode.children.length; i++) {
            updateElement(target, oldNode.children[i], newNode.children[i]);
        }
    }
}
exports.updateElement = updateElement;
function updateValue(target, newValue) {
    target.value = newValue;
}
function updateAttributes(target, oldAttributes, newAttributes) {
    for (var attr in oldAttributes) {
        if (!isEventAttr(attr)) {
            target.removeAttribute(attr);
        }
    }
    for (var attr in newAttributes) {
        if (!isEventAttr(attr)) {
            target.setAttribute(attr, newAttributes[attr]);
        }
    }
}

},{}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var view_1 = require("./flamework/view");
var app_1 = require("./flamework/app");
var state = {
    count: 0
};
var actions = {
    increment: function (state) {
        state.count++;
    }
};
var view = function (state, actions) {
    return view_1.h('div', null, view_1.h('p', null, state.count), view_1.h('button', { type: 'button', onclick: function () { return actions.increment(state); } }, 'count up'));
};
new app_1.App({
    el: '#app',
    state: state,
    view: view,
    actions: actions
});

},{"./flamework/app":1,"./flamework/view":2}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvZmxhbWV3b3JrL2FwcC50cyIsInNyYy90cy9mbGFtZXdvcmsvdmlldy50cyIsInNyYy90cy9tYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNLQSwrQkFBbUU7QUFlbkU7SUFjRSxhQUFZLE1BQXNDO1FBQ2hELElBQUksQ0FBQyxFQUFFLEdBQUcsT0FBTyxNQUFNLENBQUMsRUFBRSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDeEYsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25ELElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNyQixDQUFDO0lBTU8sNEJBQWMsR0FBdEIsVUFBdUIsT0FBMEI7UUFBakQsaUJBV0M7UUFWQyxJQUFNLFVBQVUsR0FBRyxFQUF1QixDQUFDO2dDQUNsQyxHQUFHO1lBQ1YsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzVCLFVBQVUsQ0FBQyxHQUFHLENBQUMsR0FBRyxVQUFDLEtBQVk7Z0JBQUUsY0FBWTtxQkFBWixVQUFZLEVBQVoscUJBQVksRUFBWixJQUFZO29CQUFaLDZCQUFZOztnQkFDM0MsSUFBTSxHQUFHLEdBQUcsTUFBTSxnQkFBQyxLQUFLLFNBQUssSUFBSSxFQUFDLENBQUM7Z0JBQ25DLEtBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDbkIsT0FBTyxHQUFHLENBQUM7WUFDYixDQUFDLENB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QUFDLEtBQUssRUFBRSxPQUFPO0lBQ2hELE9BQU8sUUFBQyxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQ1gsUUFBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUN6QixRQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsY0FBTSxPQUFBLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQXhCLENBQXdCLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FDckYsQ0FBQztBQUNYLENBQUMsQ0FBQztBQUVGLElBQUksU0FBRyxDQUFpQjtJQUN0QixFQUFFLEVBQUUsTUFBTTtJQUNWLEtBQUssT0FBQTtJQUNMLElBQUksTUFBQTtJQUNKLE9BQU8sU0FBQTtDQUNSLENBQUMsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qKlxuICogQVBQXG4gKiAgICBBY3Rpb27jgadTdG9yZeOBjOabtOaWsOOBleOCjOOBn+OCiVZpZXfjga7mm7TmlrDlh6bnkIbjgpLlrp/ooYzjgZnjgotDb250cm9sbGVy6YOoXG4gKi9cbmltcG9ydCB7IEFjdGlvblRyZWUgfSBmcm9tICcuL2FjdGlvbic7XG5pbXBvcnQgeyBWaWV3LCBWTm9kZSwgY3JlYXRlRWxlbWVudCwgdXBkYXRlRWxlbWVudCB9IGZyb20gJy4vdmlldyc7XG5cbi8qKlxuICogQXBw44Gu44Kk44Oz44K/44O844OV44Kn44O844K5XG4gKi9cbmludGVyZmFjZSBBcHBDb25zdHJ1Y3RvcjxTdGF0ZSwgQWN0aW9ucz4ge1xuICBlbDogSFRNTEVsZW1lbnQgfCBzdHJpbmc7IC8vIOimquODjuODvOODiVxuICB2aWV3OiBWaWV3PFN0YXRlLCBBY3Rpb25UcmVlPFN0YXRlPj47IC8vIFZpZXfjga7lrprnvqlcbiAgc3RhdGU6IFN0YXRlOyAvLyDnirbmhYvnrqHnkIZcbiAgYWN0aW9uczogQWN0aW9uVHJlZTxTdGF0ZT47IC8vIEFjdGlvbuOBruWumue+qVxufVxuXG4vKipcbiAqIEFwcOOCr+ODqeOCuVxuICovXG5leHBvcnQgY2xhc3MgQXBwPFN0YXRlLCBBY3Rpb25zPiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgZWw6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IHZpZXc6IFZpZXc8U3RhdGUsIEFjdGlvblRyZWU8U3RhdGU+PjtcbiAgcHJpdmF0ZSByZWFkb25seSBzdGF0ZTogU3RhdGU7XG4gIHByaXZhdGUgcmVhZG9ubHkgYWN0aW9uczogQWN0aW9uVHJlZTxTdGF0ZT47XG4gIHByaXZhdGUgb2xkTm9kZTogVk5vZGU7XG4gIHByaXZhdGUgbmV3Tm9kZTogVk5vZGU7XG4gIHByaXZhdGUgc2tpcFJlbmRlcjogYm9vbGVhbjtcblxuICAvKipcbiAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAqIEBwYXJhbSB7QXBwQ29uc3RydWN0b3I8U3RhdGUsIEFjdGlvbnM+fSBwYXJhbXMgXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IocGFyYW1zOiBBcHBDb25zdHJ1Y3RvcjxTdGF0ZSwgQWN0aW9ucz4pIHtcbiAgICB0aGlzLmVsID0gdHlwZW9mIHBhcmFtcy5lbCA9PT0gXCJzdHJpbmdcIiA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGFyYW1zLmVsKSA6IHBhcmFtcy5lbDtcbiAgICB0aGlzLnZpZXcgPSBwYXJhbXMudmlldztcbiAgICB0aGlzLnN0YXRlID0gcGFyYW1zLnN0YXRlO1xuICAgIHRoaXMuYWN0aW9ucyA9IHRoaXMuZGlzcGF0Y2hBY3Rpb24ocGFyYW1zLmFjdGlvbnMpO1xuICAgIHRoaXMucmVzb2x2ZU5vZGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBY3Rpb27jgatTdGF0ZeOCkua4oeOBl+OAgeaWsOOBl+OBhOS7ruaDs0RPTeOCkuS9nOOCi1xuICAgKiBAcGFyYW0ge0FjdGlvblRyZWU8U3RhdGU+fSBhY3Rpb25zIFxuICAgKi9cbiAgcHJpdmF0ZSBkaXNwYXRjaEFjdGlvbihhY3Rpb25zOiBBY3Rpb25UcmVlPFN0YXRlPikge1xuICAgIGNvbnN0IGRpc3BhdGNoZWQgPSB7fSBhcyBBY3Rpb25UcmVlPFN0YXRlPjtcbiAgICBmb3IgKGxldCBrZXkgaW4gYWN0aW9ucykge1xuICAgICAgY29uc3QgYWN0aW9uID0gYWN0aW9uc1trZXldO1xuICAgICAgZGlzcGF0Y2hlZFtrZXldID0gKHN0YXRlOiBTdGF0ZSwgLi4uZGF0YTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IHJldCA9IGFjdGlvbihzdGF0ZSwgLi4uZGF0YSk7XG4gICAgICAgIHRoaXMucmVzb2x2ZU5vZGUoKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRpc3BhdGNoZWQ7XG4gIH1cblxuICAvKipcbiAgICog5Luu5oOzRE9N44KS5YaN5qeL56+J44GZ44KLXG4gICAqL1xuICBwcml2YXRlIHJlc29sdmVOb2RlKCk6IHZvaWQgIHtcbiAgICB0aGlzLm5ld05vZGUgPSB0aGlzLnZpZXcodGhpcy5zdGF0ZSwgdGhpcy5hY3Rpb25zKTtcbiAgICB0aGlzLnNjaGVkdWxlUmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICog44Os44Oz44OA44Oq44Oz44Kw44Gu44K544Kx44K444Ol44O844Oq44Oz44KwXG4gICAqIO+8iOmAo+e2muOBp0FjdGlvbuOBjOWun+ihjOOBleOCjOOBn+aZguOBq+S9leW6puOCgkRPTeODhOODquODvOOCkuabuOOBjeaPm+OBiOOBquOBhOOBn+OCge+8iVxuICAgKi9cbiAgcHJpdmF0ZSBzY2hlZHVsZVJlbmRlcigpOiB2b2lkICB7XG4gICAgaWYgKCF0aGlzLnNraXBSZW5kZXIpIHtcbiAgICAgIHRoaXMuc2tpcFJlbmRlciA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KHRoaXMucmVuZGVyLmJpbmQodGhpcykpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmj4/nlLtcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm9sZE5vZGUpIHtcbiAgICAgIHVwZGF0ZUVsZW1lbnQodGhpcy5lbCwgdGhpcy5vbGROb2RlLCB0aGlzLm5ld05vZGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQodGhpcy5uZXdOb2RlKSk7XG4gICAgfVxuICAgIHRoaXMub2xkTm9kZSA9IHRoaXMubmV3Tm9kZTtcbiAgICB0aGlzLnNraXBSZW5kZXIgPSBmYWxzZTtcbiAgfVxufSIsIi8qKlxuICogVmlld1xuICogICAg5Luu5oOzRE9N44KS5L2c5oiQ44GZ44KLaOmWouaVsOOCkuWumue+qVxuICovXG5cbnR5cGUgTm9kZVR5cGUgPSBWTm9kZSB8IHN0cmluZyB8IG51bWJlcjtcbnR5cGUgQXR0cmlidXRlcyA9IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgRnVuY3Rpb24gfTtcblxuZXhwb3J0IGludGVyZmFjZSBWaWV3PFN0YXRlLCBBY3Rpb25zPiB7XG4gIChzdGF0ZTogU3RhdGUsIGFjdGlvbnM6IEFjdGlvbnMpOiBWTm9kZTtcbn1cblxuLyoqXG4gKiDku67mg7NET03jgqTjg7Pjgr/jg7zjg5Xjgqfjg7zjgrlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWTm9kZSB7XG4gIG5vZGVOYW1lOiBrZXlvZiBFbGVtZW50VGFnTmFtZU1hcDtcbiAgYXR0cmlidXRlczogQXR0cmlidXRlcztcbiAgY2hpbGRyZW46IE5vZGVUeXBlW107XG59XG5cbi8qKlxuICog5Luu5oOzRE9N44KS5L2c5oiQ44GZ44KL6Zai5pWwXG4gKiBAcGFyYW0ge0VsZW1lbnRUYWdOYW1lTWFwfSBub2RlTmFtZSDjgr/jgrDlkI1cbiAqIEBwYXJhbSB7QXR0cmlidXRlc30gYXR0cmlidXRlcyDlsZ7mgKfjgqrjg5bjgrjjgqfjgq/jg4hcbiAqIEBwYXJhbSB7QXJyYXk8Tm9kZVR5cGU+fSBjaGlsZHJlbiDlrZDopoHntKBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGgobm9kZU5hbWU6IGtleW9mIEVsZW1lbnRUYWdOYW1lTWFwLCBhdHRyaWJ1dGVzOiBBdHRyaWJ1dGVzLCAuLi5jaGlsZHJlbjogTm9kZVR5cGVbXSk6IFZOb2RlIHtcbiAgcmV0dXJuIHtcbiAgICBub2RlTmFtZSxcbiAgICBhdHRyaWJ1dGVzLFxuICAgIGNoaWxkcmVuXG4gIH07XG59XG5cbi8qKlxuICog44Oq44Ki44OrRE9N44KS55Sf5oiQ44GZ44KL6Zai5pWwXG4gKiBAcGFyYW0ge05vZGVUeXBlfSBub2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KG5vZGU6IE5vZGVUeXBlKTogSFRNTEVsZW1lbnQgfCBUZXh0IHtcbiAgaWYgKCFpc1ZOb2RlKG5vZGUpKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5vZGUudG9TdHJpbmcoKSk7XG4gIH1cbiAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGUubm9kZU5hbWUpO1xuICBzZXRBdHRyaWJ1dGVzKGVsLCBub2RlLmF0dHJpYnV0ZXMpO1xuICBub2RlLmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gZWwuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudChjaGlsZCkpKTtcbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIOS7ruaDs0RPTeOBi+OBqeOBhuOBi+OCkueiuuiqjeOBmeOCi+mWouaVsFxuICogQHBhcmFtIHtOb2RlVHlwZX0gbm9kZSBcbiAqIEByZXR1cm4ge2Jvb2xlYW59IOW8leaVsOOBjOS7ruaDs0RPTeOBoOOBo+OBn+WgtOWQiHRydWUsIOOBneOCjOS7peWkluOBr2ZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVk5vZGUobm9kZTogTm9kZVR5cGUpOiBub2RlIGlzIFZOb2RlIHtcbiAgcmV0dXJuIHR5cGVvZiBub2RlICE9PSBcInN0cmluZ1wiICYmIHR5cGVvZiBub2RlICE9PSBcIm51bWJlclwiO1xufVxuXG4vKipcbiAqIOWxnuaAp+OCkui/veWKoOOBmeOCi+mWouaVsFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IOWxnuaAp+OCkui/veWKoOOBmeOCi+imgee0oFxuICogQHBhcmFtIHtBdHRyaWJ1dGVzfSBhdHRycyDlsZ7mgKfjgqrjg5bjgrjjgqfjgq/jg4hcbiAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlcyh0YXJnZXQ6IEhUTUxFbGVtZW50LCBhdHRyczogQXR0cmlidXRlcyk6IHZvaWQge1xuICBmb3IgKGxldCBhdHRyIGluIGF0dHJzKSB7XG4gICAgaWYgKGlzRXZlbnRBdHRyKGF0dHIpKSB7XG4gICAgICBjb25zdCBldmVudE5hbWUgPSBhdHRyLnNsaWNlKDIpO1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBhdHRyc1thdHRyXSBhcyBFdmVudExpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSBhcyBzdHJpbmcpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIOW8leaVsOOBjOOCpOODmeODs+ODiOOCkuihqOOBmeaWh+Wtl+WIl+OBi+OBqeOBhuOBi+WIpOWumlxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHIg5bGe5oCn5ZCNXG4gKiBAcmV0dXJuIHtib29sZWFufSDlvJXmlbDjgYzjgqTjg5njg7Pjg4jjga7mmYJ0cnVlLCDjgZ3jgozku6XlpJbjga7mmYJmYWxzZVxuICovXG5mdW5jdGlvbiBpc0V2ZW50QXR0cihhdHRyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIC9eb24vLnRlc3QoYXR0cik7XG59XG5cbi8qKlxuICog5aSJ5pu044GM44GC44Gj44Gf5aC05ZCI44Gu5Yem55CG44K/44Kk44OXXG4gKi9cbmVudW0gQ2hhbmdlZFR5cGUge1xuICBOb25lLCAvLyDlt67liIbjgarjgZdcbiAgVHlwZSwgLy8gbm9kZeOBruWei+OBjOmBleOBhlxuICBUZXh0LCAvLyDjg4bjgq3jgrnjg4jjg47jg7zjg4njgYzpgZXjgYZcbiAgTm9kZSwgLy8g44OO44O844OJ5ZCN77yI44K/44Kw5ZCN77yJ44GM6YGV44GGXG4gIFZhbHVlLCAvLyBpbnB1dOOBrnZhbHVl44GM6YGV44GGXG4gIEF0dHIgLy8g5bGe5oCn44GM6YGV44GGXG59XG5cbi8qKlxuICog77yS44Gk44Gu5Luu5oOzRE9N44Gu5beu5YiG44KS5qSc55+l44GZ44KL77yI5LuW44Gu44OV44Os44O844Og44Ov44O844Kv44Gg44Go44GT44GT44Gu5Yem55CG44Gv44KC44Gj44Go6KSH6ZuR44GL44KC77yJXG4gKiBAcGFyYW0ge05vZGVUeXBlfSBiZWZvcmUg5aSJ5pu05YmNXG4gKiBAcGFyYW0ge05vZGVUeXBlfSBhZnRlciDlpInmm7TlvoxcbiAqL1xuZnVuY3Rpb24gaGFzQ2hhbmdlZChhOiBOb2RlVHlwZSwgYjogTm9kZVR5cGUpOiBDaGFuZ2VkVHlwZSB7XG4gIC8vIGRpZmZlcmVudCB0eXBlXG4gIGlmICh0eXBlb2YgYSAhPT0gdHlwZW9mIGIpIHtcbiAgICByZXR1cm4gQ2hhbmdlZFR5cGUuVHlwZTtcbiAgfVxuXG4gIC8vIGRpZmZlcmVudCBzdHJpbmdcbiAgaWYgKCFpc1ZOb2RlKGEpICYmIGEgIT09IGIpIHtcbiAgICByZXR1cm4gQ2hhbmdlZFR5cGUuVGV4dDtcbiAgfVxuXG4gIC8vIOewoeaYk+eahOavlOi8gygpXG4gIGlmIChpc1ZOb2RlKGEpICYmIGlzVk5vZGUoYikpIHtcbiAgICBpZiAoYS5ub2RlTmFtZSAhPT0gYi5ub2RlTmFtZSkge1xuICAgICAgcmV0dXJuIENoYW5nZWRUeXBlLk5vZGU7XG4gICAgfVxuICAgIGlmICgoYS5hdHRyaWJ1dGVzICE9PSBudWxsICYmIGIuYXR0cmlidXRlcyAhPT0gbnVsbCkgJiYgYS5hdHRyaWJ1dGVzLnZhbHVlICE9PSBiLmF0dHJpYnV0ZXMudmFsdWUpIHtcbiAgICAgIHJldHVybiBDaGFuZ2VkVHlwZS5WYWx1ZTtcbiAgICB9XG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KGEuYXR0cmlidXRlcykgIT09IEpTT04uc3RyaW5naWZ5KGIuYXR0cmlidXRlcykpIHtcbiAgICAgIHJldHVybiBDaGFuZ2VkVHlwZS5BdHRyO1xuICAgIH1cbiAgfVxuICByZXR1cm4gQ2hhbmdlZFR5cGUuTm9uZTtcbn1cblxuLyoqXG4gKiDku67mg7NET03jga7lt67liIbjgpLmpJznn6XjgZfjgIHjg6rjgqLjg6tET03jgavlj43mmKDjgZnjgotcbiAqIEBwYXJhbSBwYXJlbnQgXG4gKiBAcGFyYW0gb2xkTm9kZSBcbiAqIEBwYXJhbSBuZXdOb2RlIFxuICogQHBhcmFtIGluZGV4IFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50LCBvbGROb2RlOiBOb2RlVHlwZSwgbmV3Tm9kZTogTm9kZVR5cGUsIGluZGV4ID0gMCk6IHZvaWQge1xuICAvLyDlj6TjgYROb2Rl44GM44Gq44GR44KM44Gw5paw44GX44GP5L2c44KLXG4gIGlmIChvbGROb2RlID09IG51bGwpIHtcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudChuZXdOb2RlKSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgdGFyZ2V0ID0gcGFyZW50LmNoaWxkTm9kZXNbaW5kZXhdO1xuXG4gIC8vIOaWsOOBl+OBhE5vZGXjgYzjgarjgZHjgozjgbDliYrpmaRcbiAgaWYgKG5ld05vZGUgPT0gbnVsbCkge1xuICAgIHBhcmVudC5yZW1vdmVDaGlsZCh0YXJnZXQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIOOBqeOBoeOCieOCguOBguOCjOOBsOW3ruWIhuOCkuODgeOCp+ODg+OCr+OBl+OAgeWHpueQhuOCkuihjOOBhlxuICBjb25zdCBjaGFuZ2VUeXBlID0gaGFzQ2hhbmdlZChvbGROb2RlLCBuZXdOb2RlKTtcblxuICBzd2l0Y2goY2hhbmdlVHlwZSkge1xuICAgIGNhc2UgQ2hhbmdlZFR5cGUuVHlwZTpcbiAgICBjYXNlIENoYW5nZWRUeXBlLlRleHQ6XG4gICAgY2FzZSBDaGFuZ2VkVHlwZS5Ob2RlOlxuICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChjcmVhdGVFbGVtZW50KG5ld05vZGUpLCB0YXJnZXQpO1xuICAgICAgcmV0dXJuO1xuICAgIGNhc2UgQ2hhbmdlZFR5cGUuVmFsdWU6XG4gICAgICB1cGRhdGVWYWx1ZSh0YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCwgKG5ld05vZGUgYXMgVk5vZGUpLmF0dHJpYnV0ZXMudmFsdWUgYXMgc3RyaW5nKTtcbiAgICAgIHJldHVybjtcbiAgICBjYXNlIENoYW5nZWRUeXBlLkF0dHI6XG4gICAgICB1cGRhdGVBdHRyaWJ1dGVzKHRhcmdldCBhcyBIVE1MRWxlbWVudCwgKG9sZE5vZGUgYXMgVk5vZGUpLmF0dHJpYnV0ZXMsIChuZXdOb2RlIGFzIFZOb2RlKS5hdHRyaWJ1dGVzKTtcbiAgICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIOWGjeW4sOeahOOBq+WtkOimgee0oOOBruabtOaWsOOCkuihjOOBhlxuICBpZiAoaXNWTm9kZShvbGROb2RlKSAmJiBpc1ZOb2RlKG5ld05vZGUpKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdOb2RlLmNoaWxkcmVuLmxlbmd0aCB8fCBpIDwgb2xkTm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgdXBkYXRlRWxlbWVudCh0YXJnZXQgYXMgSFRNTEVsZW1lbnQsIG9sZE5vZGUuY2hpbGRyZW5baV0sIG5ld05vZGUuY2hpbGRyZW5baV0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIHRhcmdldOOBrnZhbHVl44KS5pu05pawXG4gKiBAcGFyYW0ge0hUTUxJbnB1dEVsZW1lbnR9IHRhcmdldCBcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZXdWYWx1ZSBcbiAqL1xuZnVuY3Rpb24gdXBkYXRlVmFsdWUodGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50LCBuZXdWYWx1ZTogc3RyaW5nKTogdm9pZCB7XG4gIHRhcmdldC52YWx1ZSA9IG5ld1ZhbHVlO1xufVxuXG4vKipcbiAqIHRhcmdldOOBruWxnuaAp+WApOOCkuabtOaWsFxuICog5Y2Y57SU44GrTm9kZeOBlOOBqHJlcGxhY2XjgZfjgabjgZfjgb7jgYbjgahpbnB1dOOBruODleOCqeODvOOCq+OCueOBjOWkluOCjOOBpuOBl+OBvuOBhuOBruOBp+WApOOBoOOBkeabtOaWsFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IFxuICogQHBhcmFtIHtBdHRyaWJ1dGVzfSBvbGRBdHRyaWJ1dGVzIFxuICogQHBhcmFtIHtBdHRyaWJ1dGVzfSBuZXdBdHRyaWJ1dGVzIFxuICovXG5mdW5jdGlvbiB1cGRhdGVBdHRyaWJ1dGVzKHRhcmdldDogSFRNTEVsZW1lbnQsIG9sZEF0dHJpYnV0ZXM6IEF0dHJpYnV0ZXMsIG5ld0F0dHJpYnV0ZXM6IEF0dHJpYnV0ZXMpOiB2b2lkIHtcbiAgLy8g5Y+k44GE44Gu44Gv5raI44GZXG4gIGZvciAobGV0IGF0dHIgaW4gb2xkQXR0cmlidXRlcykge1xuICAgIGlmICghaXNFdmVudEF0dHIoYXR0cikpIHtcbiAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgfVxuICB9XG4gIC8vIOaWsOOBl+OBhOOCguOBruOCkui/veWKoOOBmeOCi1xuICBmb3IgKGxldCBhdHRyIGluIG5ld0F0dHJpYnV0ZXMpIHtcbiAgICBpZiAoIWlzRXZlbnRBdHRyKGF0dHIpKSB7XG4gICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKGF0dHIsIG5ld0F0dHJpYnV0ZXNbYXR0cl0gYXMgc3RyaW5nKTtcbiAgICB9XG4gIH1cbn0gIiwiaW1wb3J0IHsgVmlldywgaCB9IGZyb20gJy4vZmxhbWV3b3JrL3ZpZXcnO1xuaW1wb3J0IHsgQWN0aW9uVHJlZSB9IGZyb20gJy4vZmxhbWV3b3JrL2FjdGlvbic7XG5pbXBvcnQgeyBBcHAgfSBmcm9tICcuL2ZsYW1ld29yay9hcHAnO1xuXG50eXBlIFN0YXRlID0gdHlwZW9mIHN0YXRlO1xudHlwZSBBY3Rpb25zID0gdHlwZW9mIGFjdGlvbnM7XG5cbi8qKlxuICog44OV44Os44O844Og44Ov44O844Kv44KS5YWD44Gr44Ki44OX44Oq44Kx44O844K344On44Oz44KS5L2c5oiQ44GZ44KLXG4gKi9cbmNvbnN0IHN0YXRlID0ge1xuICBjb3VudDogMFxufTtcblxuY29uc3QgYWN0aW9uczogQWN0aW9uVHJlZTxTdGF0ZT4gPSB7XG4gIGluY3JlbWVudDogKHN0YXRlOiBTdGF0ZSkgPT4ge1xuICAgIHN0YXRlLmNvdW50Kys7XG4gIH1cbn07XG5cbmNvbnN0IHZpZXc6IFZpZXc8U3RhdGUsIEFjdGlvbnM+ID0gKHN0YXRlLCBhY3Rpb25zKSA9PiB7XG4gIHJldHVybiBoKCdkaXYnLCBudWxsLCBcbiAgICAgICAgICAgaCgncCcsIG51bGwsIHN0YXRlLmNvdW50KSxcbiAgICAgICAgICAgaCgnYnV0dG9uJywgeyB0eXBlOiAnYnV0dG9uJywgb25jbGljazogKCkgPT4gYWN0aW9ucy5pbmNyZW1lbnQoc3RhdGUpIH0sICdjb3VudCB1cCcpXG4gICAgICAgICApO1xufTtcblxubmV3IEFwcDxTdGF0ZSwgQWN0aW9ucz4oe1xuICBlbDogJyNhcHAnLFxuICBzdGF0ZSxcbiAgdmlldyxcbiAgYWN0aW9uc1xufSk7Il19
